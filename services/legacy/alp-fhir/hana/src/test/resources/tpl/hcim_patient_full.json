{
	"resource": "http://hl7.org/fhir/StructureDefinition/Patient",
	"tables": [
		{
			"id": "Patient",
			"schema": "HCIM",
			"table": "HCIM_PATIENT",
			"resourceLink": {
				"type": "column",
				"column": "identification_number"
			},
			"max":"1",
			"columns":[
				{"name":"identification_number"},
  				{"name":"information_source_patient"},
  				{"name":"information_source_professional"},
  				{"name":"information_source_contact_person"},
  				{"name":"author_patient"},
			    {"name":"author_professional"},
			    {"name":"author_contact_person"},
			    {"name":"subject"},
			    {"name":"datetime"},
			    {"name":"dateOfBirth"},
  				{"name":"gender"},
  				{"name":"multipleBirthIndicator"},
  				{"name":"dateOfDeath"},
  				{"name":"deathIndicator"}
			]
		},
		{
			"id": "PatientIdentifier",
			"schema": "HCIM",
			"table": "HCIM_PATIENT_IDENTIFICATION",
			"resourceLink": {
				"type": "column",
				"column": "identification_number"
			},
			"max":"*",
			"columns":[
				{"name":"identification_number"},
				{"name":"PatientIdentification"},
  				{"name":"System"}
			]
		},
		{
			"id": "PatientName",
			"schema": "HCIM",
			"table": "HCIM_PATIENT_NAME_INFORMATION",
			"resourceLink": {
				"type": "column",
				"column": "identification_number"
			},
			"max":"1",
			"columns":[
				{"name":"identification_number"},
				{"name":"FirstNames"},
  				{"name":"Initials"},
  				{"name":"GivenName"},
  				{"name":"NameUsage"},
  				{"name":"LastName_Prefix"},
  				{"name":"LastName_LastName"},
  				{"name":"LastNamePartner_Prefix"},
  				{"name":"LastNamePartner_LastName"}
			]
			
		},
		{
			"id": "PatientAddress",
			"schema": "HCIM",
			"table": "HCIM_PATIENT_ADDRESS_INFORMATION",
			"resourceLink": {
				"type": "column",
				"column": "identification_number"
			},
			"max":"*",
			"columns":[
				{"name":"identification_number"},
				{"name":"Street"},
				{"name":"HouseNumber"},
				{"name":"HouseNumberLetter"},
				{"name":"HouseNumberAddition"},
				{"name":"HouseNumberIndication"},
				{"name":"Postcode"},
				{"name":"PlaceOfResidence"},
				{"name":"Municipality"},
				{"name":"Country"},
				{"name":"AdditionalInformation"},
				{"name":"AddressType"}
			]
		}
	],
	"elements": [
		{
			"dataelement": "Patient.id",
			"tableid": "Patient",
			"column": "identification_number"
		},
		{
			"dataelement": "Patient.identifier.value",
			"tableid": "PatientIdentifier",
			"column": "PatientIdentification"
		},
		{
			"dataelement": "Patient.identifier.system",
			"tableid": "PatientIdentifier",
			"column": "system"
		}
	],
	"search": [
		"identifier"
	],
	"valueMap":[
		{
			"name":"gender",
			"map":{"M" : "male", "F" : "female","UN":"other","UNK":"unknown"}
		},
		{
			"name":"addressuse",
			"map":{"HP" : "home", "TMP" : "temp","WP":"work","HV":"temp","PHYS":"home","PST":"home"}
		}
	],
	"mapping":[
		{
			"dataelement": "Patient.id",
			"tableid": "Patient",
			"column": "identification_number"
		},
		{
			"dataelement":"Patient.meta.profile",
			"tableid": "Patient",
			"type":"value",
			"value":"http://nictiz.nl/fhir/StructureDefinition/nl-core-patient"
		},
		{
			"dataelement": "Patient.active",
			"tableid": "Patient",
			"type":"value",
			"value": "true"
		},
		{
			"dataelement": "Patient.birthDate",
			"tableid": "Patient",
			"column": "dateOfBirth"
		},
		{
			"dataelement": "Patient.deceasedBoolean",
			"tableid": "Patient",
			"column": "deathIndicator"
		},
		{
			"dataelement": "Patient.gender",
			"tableid": "Patient",
			"map":"gender",
			"column": "gender"
		},
		{
			"dataelement": "Patient.multipleBirthBoolean",
			"tableid": "Patient",
			"column": "multipleBirthIndicator"
		},
		{
			"dataelement": "Patient.identifier.value",
			"tableid": "PatientIdentifier",
			"column": "PatientIdentification"
		},
		{
			"dataelement": "Patient.identifier.system",
			"tableid": "PatientIdentifier",
			"column": "System"
		},
		{
			"dataelement":"Patient.name",
			"tableid":"PatientName",
			"type":"complex",
			"elements":[
				{
					"dataelement": "given",
					"column":"FirstNames"
				},
				{
					"dataelement": "given",
					"column":"Initials"
				},
				{
					"dataelement": "given",
					"column":"GivenName"
				}
			]
		},
		{	
			"dataelement": "Patient.address",
			"tableid":"PatientAddress",
			"type":"complex",
			"elements":[
				{
					"dataelement": "use",
					"map":"addressuse",
					"column":"AddressType"
				},
				{
					"dataelement": "type",
					"column":"AddressType"
				},
				{
					"dataelement": "line",
					"type":"expression",
					"expression":"PatientAddress.Street&(' '+PatientAddress.HouseNumber+PatientAddress.HouseNumberLetter)"
				},
				{
					"dataelement": "city",
					"column":"PlaceOfResidence"
				},
				{
					"dataelement": "district",
					"column":"Municipality"
				},
				{
					"dataelement": "postalCode",
					"column":"Postcode"
				},
				{
					"dataelement": "country",
					"column":"Country"
				}
			]
		},
		{	
			"dataelement": "Patient.address.extension",
			"tableid":"PatientAddress",
			"type":"complex",
			"condition":"PatientAddress.AddressType='HP'",
			"elements":[
				{
					"dataelement": "url",
					"type":"value",
					"value":"http://fhir.nl/fhir/StructureDefinition/nl-core-address-official"
				},
				{
					"dataelement": "valueBoolean",
					"type":"value",
					"value":"true"
				}
			]
		}
		
	]
}