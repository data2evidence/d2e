PROCEDURE "hc.hph.plugins.ccdi.db.procedures::hasUnfinishedQueueEntries" (
		in auditLogId	BIGINT,
		out hasUnfinishedQueueEntries	TINYINT
   ) 
   LANGUAGE SQLSCRIPT
   SQL SECURITY INVOKER

   READS SQL DATA
   AS   
BEGIN  

SELECT (CASE WHEN (COUNT(*) > 0) THEN 1 ELSE 0 END) INTO hasUnfinishedQueueEntries 
FROM "hc.hph.plugins.ccdi.db.models::Tasks.Queue" WHERE 
 "auditLogId" = :auditLogId  
 AND "STATUS" IN ('Queued','Running');

END;