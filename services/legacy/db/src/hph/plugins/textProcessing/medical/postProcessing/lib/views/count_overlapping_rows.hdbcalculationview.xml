<?xml version="1.0" encoding="UTF-8"?>
<Calculation:scenario xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:Calculation="http://www.com/ndb/BiModelCalculation.ecore" schemaVersion="3.0" defaultLanguage="$$language$$" defaultClient="$$client$$" hierarchiesSQLEnabled="false" executionSemantic="UNDEFINED" dataCategory="CUBE" id="hc.hph.plugins.textProcessing.medical.postProcessing.lib.views::count_overlapping_rows" xscCompatibilityMode="true" applyPrivilegeType="NONE" outputViewType="Aggregation" enforceSqlExecution="false">
  <descriptions defaultDescription="fill_ta_ambiguity"/>
  <localVariables/>
  <variableMappings/>
  <informationModelLayout relativeWidthScenario="27"/>
  <dataSources>
    <DataSource id="hc.hph.plugins.textProcessing.medical.postProcessing.lib.table_functions::ta_temp" type="TABLE_FUNCTION">
      <resourceUri>hc.hph.plugins.textProcessing.medical.postProcessing.lib.table_functions::ta_temp</resourceUri>
    </DataSource>
    <DataSource id="hc.hph.plugins.textProcessing.medical.postProcessing.lib.views::filter_labtests">
      <resourceUri>hc.hph.plugins.textProcessing.medical.postProcessing.lib.views::filter_labtests</resourceUri>
    </DataSource>
    <DataSource id="hc.hph.plugins.textProcessing.medical.postProcessing.lib.views::filter_conditions">
      <resourceUri>hc.hph.plugins.textProcessing.medical.postProcessing.lib.views::filter_conditions</resourceUri>
    </DataSource>
  </dataSources>
  <calculationViews>
    <calculationView xsi:type="Calculation:ProjectionView" id="Dict_Entities_Left">
      <descriptions/>
      <viewAttributes>
        <viewAttribute id="DWID"/>
        <viewAttribute id="TA_RULE"/>
        <viewAttribute id="TA_COUNTER"/>
        <viewAttribute id="TA_OFFSET"/>
        <viewAttribute id="TA_TYPE"/>
        <viewAttribute id="TA_NORMALIZED"/>
      </viewAttributes>
      <calculatedViewAttributes/>
      <restrictedViewAttributes/>
      <input node="Collect_Dict_Entities">
        <mapping xsi:type="Calculation:AttributeMapping" source="DWID" target="DWID"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_RULE" target="TA_RULE"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_COUNTER" target="TA_COUNTER"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_OFFSET" target="TA_OFFSET"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_TYPE" target="TA_TYPE"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_NORMALIZED" target="TA_NORMALIZED"/>
      </input>
    </calculationView>
    <calculationView xsi:type="Calculation:UnionView" id="Collect_Dict_Entities">
      <viewAttributes>
        <viewAttribute id="DWID">
          <descriptions defaultDescription="DWID"/>
        </viewAttribute>
        <viewAttribute id="TA_RULE">
          <descriptions defaultDescription="TA_RULE"/>
        </viewAttribute>
        <viewAttribute aggregationType="sum" id="TA_COUNTER">
          <descriptions defaultDescription="TA_COUNTER"/>
        </viewAttribute>
        <viewAttribute aggregationType="sum" id="TA_OFFSET">
          <descriptions defaultDescription="TA_OFFSET"/>
        </viewAttribute>
        <viewAttribute id="TA_TYPE">
          <descriptions defaultDescription="TA_TYPE"/>
        </viewAttribute>
        <viewAttribute id="TA_NORMALIZED">
          <descriptions defaultDescription="TA_NORMALIZED"/>
        </viewAttribute>
      </viewAttributes>
      <calculatedViewAttributes/>
      <restrictedViewAttributes/>
      <input node="Other_Dict_Entities" emptyUnionBehavior="NO_ROW">
        <mapping xsi:type="Calculation:AttributeMapping" source="DWID" target="DWID"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_RULE" target="TA_RULE"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_COUNTER" target="TA_COUNTER"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_OFFSET" target="TA_OFFSET"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_TYPE" target="TA_TYPE"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_NORMALIZED" target="TA_NORMALIZED"/>
      </input>
      <input node="Obs_Laboratory" emptyUnionBehavior="NO_ROW">
        <mapping xsi:type="Calculation:AttributeMapping" source="DWID" target="DWID"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_RULE" target="TA_RULE"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_COUNTER" target="TA_COUNTER"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_OFFSET" target="TA_OFFSET"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_TYPE" target="TA_TYPE"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_NORMALIZED" target="TA_NORMALIZED"/>
      </input>
      <input node="Cond_Symp" emptyUnionBehavior="NO_ROW">
        <mapping xsi:type="Calculation:AttributeMapping" source="DWID" target="DWID"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_RULE" target="TA_RULE"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_COUNTER" target="TA_COUNTER"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_OFFSET" target="TA_OFFSET"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_TYPE" target="TA_TYPE"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_NORMALIZED" target="TA_NORMALIZED"/>
      </input>
    </calculationView>
    <calculationView xsi:type="Calculation:ProjectionView" id="Other_Dict_Entities" filterExpressionLanguage="COLUMN_ENGINE">
      <viewAttributes>
        <viewAttribute id="DWID">
          <descriptions defaultDescription="DWID"/>
        </viewAttribute>
        <viewAttribute id="TA_RULE">
          <descriptions defaultDescription="TA_RULE"/>
        </viewAttribute>
        <viewAttribute id="TA_COUNTER">
          <descriptions defaultDescription="TA_COUNTER"/>
        </viewAttribute>
        <viewAttribute id="TA_OFFSET">
          <descriptions defaultDescription="TA_OFFSET"/>
        </viewAttribute>
        <viewAttribute id="TA_TYPE">
          <descriptions defaultDescription="TA_TYPE"/>
        </viewAttribute>
        <viewAttribute id="TA_NORMALIZED">
          <descriptions defaultDescription="TA_NORMALIZED"/>
        </viewAttribute>
      </viewAttributes>
      <calculatedViewAttributes/>
      <restrictedViewAttributes/>
      <input node="hc.hph.plugins.textProcessing.medical.postProcessing.lib.table_functions::ta_temp">
        <mapping xsi:type="Calculation:AttributeMapping" source="DWID" target="DWID"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_RULE" target="TA_RULE"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_COUNTER" target="TA_COUNTER"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_OFFSET" target="TA_OFFSET"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_TYPE" target="TA_TYPE"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_NORMALIZED" target="TA_NORMALIZED"/>
      </input>
      <filter>in(&quot;TA_TYPE&quot;,'BODYSITE','MEDICATIONSTATEMENT_MEDICATION','PROCEDURE_DIAGNOSTIC','PROCEDURE_THERAPEUTIC')</filter>
    </calculationView>
    <calculationView xsi:type="Calculation:ProjectionView" id="Obs_Laboratory">
      <viewAttributes>
        <viewAttribute id="DWID">
          <descriptions defaultDescription="DWID"/>
        </viewAttribute>
        <viewAttribute id="TA_RULE">
          <descriptions defaultDescription="TA_RULE"/>
        </viewAttribute>
        <viewAttribute id="TA_COUNTER">
          <descriptions defaultDescription="TA_COUNTER"/>
        </viewAttribute>
        <viewAttribute id="TA_OFFSET">
          <descriptions defaultDescription="TA_OFFSET"/>
        </viewAttribute>
        <viewAttribute id="TA_TYPE">
          <descriptions defaultDescription="TA_TYPE"/>
        </viewAttribute>
      
        <viewAttribute id="TA_NORMALIZED">
          <descriptions defaultDescription="TA_NORMALIZED"/>
        </viewAttribute></viewAttributes>
      <calculatedViewAttributes/>
      <restrictedViewAttributes/>
      <input node="hc.hph.plugins.textProcessing.medical.postProcessing.lib.views::filter_labtests">
        <mapping xsi:type="Calculation:AttributeMapping" source="DWID" target="DWID"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_COUNTER" target="TA_COUNTER"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_NORMALIZED" target="TA_NORMALIZED"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_OFFSET" target="TA_OFFSET"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_RULE" target="TA_RULE"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_TYPE" target="TA_TYPE"/>
      </input>
    </calculationView>
    <calculationView xsi:type="Calculation:ProjectionView" id="Cond_Symp">
      <viewAttributes>
        <viewAttribute id="DWID">
          <descriptions defaultDescription="DWID"/>
        </viewAttribute>
        <viewAttribute id="TA_RULE">
          <descriptions defaultDescription="TA_RULE"/>
        </viewAttribute>
        <viewAttribute id="TA_COUNTER">
          <descriptions defaultDescription="TA_COUNTER"/>
        </viewAttribute>
        <viewAttribute id="TA_OFFSET">
          <descriptions defaultDescription="TA_OFFSET"/>
        </viewAttribute>
        <viewAttribute id="TA_TYPE">
          <descriptions defaultDescription="TA_TYPE"/>
        </viewAttribute>
      
        <viewAttribute id="TA_NORMALIZED">
          <descriptions defaultDescription="TA_NORMALIZED"/>
        </viewAttribute></viewAttributes>
      <calculatedViewAttributes/>
      <restrictedViewAttributes/>
      <input node="hc.hph.plugins.textProcessing.medical.postProcessing.lib.views::filter_conditions">
        <mapping xsi:type="Calculation:AttributeMapping" source="DWID" target="DWID"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_COUNTER" target="TA_COUNTER"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_NORMALIZED" target="TA_NORMALIZED"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_OFFSET" target="TA_OFFSET"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_RULE" target="TA_RULE"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_TYPE" target="TA_TYPE"/>
      </input>
    </calculationView>
    <calculationView xsi:type="Calculation:ProjectionView" id="Dict_Entities_Right">
      <descriptions/>
      <viewAttributes>
        <viewAttribute id="DWID"/>
        <viewAttribute id="TA_RULE"/>
        <viewAttribute id="TA_COUNTER"/>
        <viewAttribute id="TA_OFFSET"/>
        <viewAttribute id="TA_TYPE"/>
        <viewAttribute id="TA_NORMALIZED"/>
      </viewAttributes>
      <calculatedViewAttributes/>
      <restrictedViewAttributes/>
      <input node="Collect_Dict_Entities">
        <mapping xsi:type="Calculation:AttributeMapping" source="DWID" target="DWID"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_RULE" target="TA_RULE"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_COUNTER" target="TA_COUNTER"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_OFFSET" target="TA_OFFSET"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_TYPE" target="TA_TYPE"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_NORMALIZED" target="TA_NORMALIZED"/>
      </input>
    </calculationView>
    <calculationView xsi:type="Calculation:JoinView" id="To_Resolve" cardinality="C1_N" joinType="inner">
      <descriptions/>
      <viewAttributes>
        <viewAttribute id="DWID"/>
        <viewAttribute id="TA_COUNTER"/>
        <viewAttribute id="DUPLICATE_COUNT"/>
        <viewAttribute hidden="true" id="JOIN$TA_RULE$TA_RULE"/>
        <viewAttribute hidden="true" id="JOIN$TA_OFFSET$TA_OFFSET"/>
      </viewAttributes>
      <calculatedViewAttributes/>
      <restrictedViewAttributes/>
      <input node="Dict_Entities_Left">
        <mapping xsi:type="Calculation:AttributeMapping" source="DWID" target="DWID"/>
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_COUNTER" target="TA_COUNTER"/>
        <mapping xsi:type="Calculation:AttributeMapping" target="JOIN$TA_RULE$TA_RULE" source="TA_RULE"/>
        <mapping xsi:type="Calculation:AttributeMapping" target="JOIN$TA_OFFSET$TA_OFFSET" source="TA_OFFSET"/>
      </input>
      <input node="Dict_Entities_Right">
        <mapping xsi:type="Calculation:AttributeMapping" source="TA_COUNTER" target="DUPLICATE_COUNT"/>
        <mapping xsi:type="Calculation:AttributeMapping" target="DWID" source="DWID"/>
        <mapping xsi:type="Calculation:AttributeMapping" target="JOIN$TA_RULE$TA_RULE" source="TA_RULE"/>
        <mapping xsi:type="Calculation:AttributeMapping" target="JOIN$TA_OFFSET$TA_OFFSET" source="TA_OFFSET"/>
      </input>
      <joinAttribute name="DWID"/>
      <joinAttribute name="JOIN$TA_RULE$TA_RULE"/>
      <joinAttribute name="JOIN$TA_OFFSET$TA_OFFSET"/>
    </calculationView>
  </calculationViews>
  <logicalModel id="To_Resolve">
    <descriptions/>
    <attributes>
      <attribute id="DWID" displayAttribute="false" order="1" attributeHierarchyActive="false">
        <descriptions defaultDescription="DWID"/>
        <keyMapping columnObjectName="To_Resolve" columnName="DWID"/>
      </attribute>
      <attribute id="TA_COUNTER" displayAttribute="false" order="2" attributeHierarchyActive="false">
        <descriptions defaultDescription="TA_COUNTER"/>
        <keyMapping columnObjectName="To_Resolve" columnName="TA_COUNTER"/>
      </attribute>
    </attributes>
    <calculatedAttributes/>
    <privateDataFoundation>
      <tableProxies/>
      <joins/>
      <layout>
        <shapes/>
      </layout>
    </privateDataFoundation>
    <baseMeasures>
      <measure aggregationType="count" id="DUPLICATE_COUNT" order="3" measureType="simple">
        <descriptions defaultDescription="TA_COUNTER_1"/>
        <measureMapping columnObjectName="To_Resolve" columnName="DUPLICATE_COUNT"/>
      </measure>
    </baseMeasures>
    <calculatedMeasures/>
    <restrictedMeasures/>
    <localDimensions/>
  </logicalModel>
  <layout>
    <shapes>
      <shape expanded="true" modelObjectNameSpace="MeasureGroup" modelObjectName="Output">
        <upperLeftCorner x="160" y="100"/>
        <rectangleSize width="0" height="0"/>
      </shape>
      <shape expanded="true" modelObjectNameSpace="CalculationView" modelObjectName="Dict_Entities_Left">
        <upperLeftCorner x="70" y="390"/>
        <rectangleSize width="-1" height="-1"/>
      </shape>
      <shape expanded="true" modelObjectNameSpace="CalculationView" modelObjectName="Collect_Dict_Entities">
        <upperLeftCorner x="-124" y="581"/>
        <rectangleSize width="160" height="30"/>
      </shape>
      <shape expanded="true" modelObjectNameSpace="CalculationView" modelObjectName="Other_Dict_Entities">
        <upperLeftCorner x="-244" y="733"/>
        <rectangleSize width="160" height="30"/>
      </shape>
      <shape expanded="true" modelObjectNameSpace="CalculationView" modelObjectName="Obs_Laboratory">
        <upperLeftCorner x="-54" y="757"/>
        <rectangleSize width="160" height="30"/>
      </shape>
      <shape expanded="true" modelObjectNameSpace="CalculationView" modelObjectName="Cond_Symp">
        <upperLeftCorner x="130" y="768"/>
        <rectangleSize width="160" height="30"/>
      </shape>
    
      <shape expanded="true" modelObjectNameSpace="CalculationView" modelObjectName="Dict_Entities_Right">
        <upperLeftCorner x="260" y="390"/>
        <rectangleSize width="-1" height="-1"/>
      </shape>
      <shape expanded="true" modelObjectNameSpace="CalculationView" modelObjectName="To_Resolve">
        <upperLeftCorner x="160" y="240"/>
        <rectangleSize width="-1" height="-1"/>
      </shape>
      <shape modelObjectName="Dict_Entities_Left" modelObjectNameSpace="To_Resolve" modelObjectType="JoinNodeInput">
        <upperLeftCorner x="20" y="30"/>
        <rectangleSize width="250"/>
      </shape>
      <shape modelObjectName="Dict_Entities_Right" modelObjectNameSpace="To_Resolve" modelObjectType="JoinNodeInput">
        <upperLeftCorner x="320" y="30"/>
        <rectangleSize width="250"/>
      </shape>
    </shapes>
  </layout>
</Calculation:scenario>